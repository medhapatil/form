<!DOCTYPE html>
<html>
<body onload="init(9000)">

<p id='question'>Please list alternate uses of a brick:</p>
<form>
    <div id='formDiv'>
        <br><input type='text' class='inputs'><br>
        <br><input type='text' class='inputs'><br>
        <br><input type='text' class='inputs'><br>
        <br><input type='text' class='inputs'><br>
        <br><input type='text' class='inputs'><br>
    </div>
</form>

<script>

var condCount = 0;
var csv = "";
var conditions = ["brick","toothpick"];

function init(time) {
    setTimeout(nextCondition, time);
}

function nextCondition() {
    openWin();
    var x = document.getElementsByClassName("inputs");
    for (i = 0; i < x.length; i++) {
        if (x[i].value != "") {
            csv += conditions[condCount];
            csv += ",";
            csv += x[i].value;
            x[i].value="";
            csv += "\n";
        }
    }
    condCount += 1;
    document.getElementById('question').innerHTML = "Please list alternate uses of a toothpick:";
    document.getElementById('formDiv').innerHTML = "";
    var newdiv1 = document.createElement('div');
    newdiv1.innerHTML = "<br><input type='text' class='inputs'><br>";
    document.getElementById('formDiv').appendChild(newdiv1);
    var newdiv2 = document.createElement('div');
    newdiv2.innerHTML = "<br><input type='text' class='inputs'><br>";
    document.getElementById('formDiv').appendChild(newdiv2);
    var newdiv3 = document.createElement('div');
    newdiv3.innerHTML = "<br><input type='text' class='inputs'><br>";
    document.getElementById('formDiv').appendChild(newdiv3);
    var newdiv4 = document.createElement('div');
    newdiv4.innerHTML = "<br><input type='text' class='inputs'><br>";
    document.getElementById('formDiv').appendChild(newdiv4);
    var newdiv5 = document.createElement('div');
    newdiv5.innerHTML = "<br><input type='text' class='inputs'><br>";
    document.getElementById('formDiv').appendChild(newdiv5);
}

function openWin() {
  var myWindow = window.open("https://medhapatil.github.io/sorting/", "myWindow", "width=1200, height=800");
  myWindow.document.write("<p>SORTING TASK WILL COME HERE</p>");
  setTimeout(function(){ myWindow.close()
    if (condCount == 1) {
        init(9000);
    } else if (condCount == 2) {
        var hiddenElement = document.createElement('a');
        hiddenElement.href = 'data:text/csv;charset=utf-8,' + encodeURI(csv);
        hiddenElement.target = '_blank';
        hiddenElement.download = 'data.csv';
        hiddenElement.click();
        document.getElementById('formDiv').innerHTML = "";
        document.getElementById('p').innerHTML = "Thank you. Please close this window.";
        window.close();
    } }, 3000);

}


</script>

</body>
</html>

